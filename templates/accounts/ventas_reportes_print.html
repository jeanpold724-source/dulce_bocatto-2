<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Reporte de ventas</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 24px; }
    table { border-collapse: collapse; width: 100%; }
    th, td { border: 1px solid #ddd; padding: 6px 8px; }
    th { background: #f5f5f5; text-align: left; }
    tfoot th { background: #fafafa; }
    .right { text-align: right; }
    .muted { color: #777; font-size: 12px; }
  </style>
</head>
<body>
  <h2>Reporte de ventas</h2>
  <div class="muted">
    Generado: {{ hoy|date:"Y-m-d H:i" }} — Agrupación: {{ group }} — Filtros: q="{{ q }}", d1="{{ d1 }}", d2="{{ d2 }}"
  </div>

  <table>
    <thead>
      <tr>
        <th>{% if group == "dia" %}Fecha{% elif group == "cliente" %}Cliente{% else %}Producto{% endif %}</th>
        <th class="right">Ventas</th>
        <th class="right">Total (Bs.)</th>
      </tr>
    </thead>
    <tbody>
      {% for r in rows %}
      <tr>
        <td>{{ r.etiqueta }}</td>
        <td class="right">{{ r.ventas }}</td>
        <td class="right">{{ r.total|floatformat:2 }}</td>
      </tr>
      {% empty %}
      <tr><td colspan="3" class="muted">Sin datos.</td></tr>
      {% endfor %}
    </tbody>
    <tfoot>
      <tr>
        <th class="right">TOTAL</th>
        <th class="right">{{ ventas_total }}</th>
        <th class="right">{{ total_general|floatformat:2 }}</th>
      </tr>
    </tfoot>
  </table>
</body>
</html>
